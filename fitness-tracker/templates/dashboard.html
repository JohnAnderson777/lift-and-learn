{% extends "base.html" %}
{% block title %}Home Page{% endblock %}
{% block content %}
<h1>Test Home Page</h1>

</br>
<h1><center> <input type="button" value="Find Your Workout Plan"></center></h1>
{% endblock %}
{% extends "base.html" %}

{% block title %}Dashboard - FitPlan Pro{% endblock %}

{% block content %}
<nav class="navbar">
    <div class="nav-content">
        <div class="nav-brand">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5M14 12h1M9 12h1"></path>
            </svg>
            <span>FitPlan Pro</span>
        </div>
        <div class="nav-user">
            <div class="user-info">
                <div class="user-name">{{ profile.full_name }}</div>
                <div class="user-type">{{ profile.fitness_type.replace('_', ' ').title() }}</div>
            </div>
            <a href="{{ url_for('logout') }}" class="btn btn-secondary btn-sm">Logout</a>
        </div>
    </div>
</nav>

<div class="dashboard-container">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon blue">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Age & Weight</div>
                <div class="stat-value">{{ profile.age }} yrs, {{ profile.weight }} kg</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon green">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 6v6l4 2"></path>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Fitness Level</div>
                <div class="stat-value">{{ profile.fitness_level.title() }}</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon purple">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Weekly Schedule</div>
                <div class="stat-value">{{ profile.workout_days }} days/week</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon orange">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Session Length</div>
                <div class="stat-value">{{ profile.session_duration }} min</div>
            </div>
        </div>
    </div>

    {% if workout_plan %}
    <div class="plan-overview">
        <h2>{{ workout_plan.plan_name }}</h2>
        <p class="plan-description">{{ workout_plan.plan_data.description }}</p>
        <div class="plan-meta">
            <span>Duration: <strong>{{ workout_plan.plan_data.duration }}</strong></span>
            <span>Frequency: <strong>{{ workout_plan.plan_data.frequency }}</strong></span>
        </div>
    </div>

    <div class="workout-container">
        <div class="workout-sidebar">
            <h3>Workout Days</h3>
            <div class="workout-days">
                {% for workout in workout_plan.plan_data.workouts %}
                <button class="workout-day-btn {% if loop.index0 == 0 %}active{% endif %}" onclick="showWorkout({{ loop.index0 }})">
                    <div class="day-title">{{ workout.day }}</div>
                    <div class="day-focus">{{ workout.focus }}</div>
                </button>
                {% endfor %}
            </div>
        </div>

        <div class="workout-content">
            {% for workout in workout_plan.plan_data.workouts %}
            <div class="workout-detail {% if loop.index0 == 0 %}active{% endif %}" id="workout-{{ loop.index0 }}">
                <h2>{{ workout.day }}</h2>
                <p class="workout-focus">{{ workout.focus }}</p>

                <div class="workout-section">
                    <h3>Warmup</h3>
                    <ul class="workout-list">
                        {% for item in workout.warmup %}
                        <li>{{ item }}</li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="workout-section">
                    <h3>Exercises</h3>
                    <div class="exercise-list">
                        {% for exercise in workout.exercises %}
                        <div class="exercise-card">
                            <div class="exercise-header">
                                <h4>{{ exercise.name }}</h4>
                                <span class="exercise-badge">{{ exercise.sets }} sets</span>
                            </div>
                            <div class="exercise-details">
                                <div>Reps: <strong>{{ exercise.reps }}</strong></div>
                                <div>Rest: <strong>{{ exercise.rest }}</strong></div>
                            </div>
                            {% if exercise.notes %}
                            <div class="exercise-notes">Note: {{ exercise.notes }}</div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="workout-section">
                    <h3>Cooldown</h3>
                    <ul class="workout-list">
                        {% for item in workout.cooldown %}
                        <li>{{ item }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="additional-info">
        <div class="info-card">
            <h3>Nutrition Tips</h3>
            <ul class="tips-list">
                {% for tip in workout_plan.plan_data.nutrition_tips %}
                <li>{{ tip }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="info-card">
            <h3>Progression Notes</h3>
            <p>{{ workout_plan.plan_data.progression_notes }}</p>
        </div>
    </div>
    {% else %}
    <div class="no-plan">
        <p>No workout plan found. Please complete the questionnaire.</p>
        <a href="{{ url_for('questionnaire') }}" class="btn btn-primary">Create Workout Plan</a>
    </div>
    {% endif %}
</div>

<script>
function showWorkout(index) {
    document.querySelectorAll('.workout-day-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.workout-detail').forEach(detail => detail.classList.remove('active'));

    document.querySelectorAll('.workout-day-btn')[index].classList.add('active');
    document.getElementById(`workout-${index}`).classList.add('active');
}
</script>
{% endblock %}
