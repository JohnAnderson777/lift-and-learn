{% extends "base.html" %}

{% block title %}Questionnaire - FitPlan Pro{% endblock %}

{% block content %}
<div class="questionnaire-container">
    <div class="questionnaire-card">
        <div class="progress-bar">
            <div class="progress-step active" data-step="1"></div>
            <div class="progress-step" data-step="2"></div>
            <div class="progress-step" data-step="3"></div>
        </div>

        <div class="questionnaire-header">
            <h2 id="step-title">Personal Information</h2>
            <p id="step-subtitle">Step 1 of 3</p>
        </div>

        <form method="POST" id="questionnaire-form">
            <div class="step-content active" id="step-1">
                <div class="form-group">
                    <label for="full_name">Full Name</label>
                    <input type="text" id="full_name" name="full_name" placeholder="John Doe" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" name="age" placeholder="25" min="1" max="120" required>
                    </div>

                    <div class="form-group">
                        <label for="weight">Weight (kg)</label>
                        <input type="number" id="weight" name="weight" placeholder="70" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label for="height">Height (cm)</label>
                        <input type="number" id="height" name="height" placeholder="175" step="0.1" required>
                    </div>
                </div>
            </div>

            <div class="step-content" id="step-2">
                <div class="form-group">
                    <label>Fitness Type</label>
                    <div class="card-grid">
                        <label class="card-option">
                            <input type="radio" name="fitness_type" value="general_fitness" required>
                            <div class="card-content">
                                <strong>General Fitness</strong>
                                <span>Overall health & wellness</span>
                            </div>
                        </label>
                        <label class="card-option">
                            <input type="radio" name="fitness_type" value="athlete" required>
                            <div class="card-content">
                                <strong>Athlete</strong>
                                <span>Sports performance</span>
                            </div>
                        </label>
                        <label class="card-option">
                            <input type="radio" name="fitness_type" value="muscle_strength" required>
                            <div class="card-content">
                                <strong>Muscle & Strength</strong>
                                <span>Build muscle mass</span>
                            </div>
                        </label>
                        <label class="card-option">
                            <input type="radio" name="fitness_type" value="calisthenics" required>
                            <div class="card-content">
                                <strong>Calisthenics</strong>
                                <span>Bodyweight training</span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Current Fitness Level</label>
                    <div class="button-group">
                        <label class="button-option">
                            <input type="radio" name="fitness_level" value="beginner" required>
                            <span>Beginner</span>
                        </label>
                        <label class="button-option">
                            <input type="radio" name="fitness_level" value="intermediate" required>
                            <span>Intermediate</span>
                        </label>
                        <label class="button-option">
                            <input type="radio" name="fitness_level" value="advanced" required>
                            <span>Advanced</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="step-content" id="step-3">
                <div class="form-group">
                    <label for="goals">Fitness Goals</label>
                    <textarea id="goals" name="goals" rows="3" placeholder="e.g., Lose weight, build muscle, improve endurance..." required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="workout_days">Workout Days per Week</label>
                        <select id="workout_days" name="workout_days" required>
                            <option value="">Select...</option>
                            <option value="1">1 day</option>
                            <option value="2">2 days</option>
                            <option value="3">3 days</option>
                            <option value="4">4 days</option>
                            <option value="5">5 days</option>
                            <option value="6">6 days</option>
                            <option value="7">7 days</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="session_duration">Session Duration (min)</label>
                        <select id="session_duration" name="session_duration" required>
                            <option value="">Select...</option>
                            <option value="30">30 minutes</option>
                            <option value="45">45 minutes</option>
                            <option value="60">60 minutes</option>
                            <option value="90">90 minutes</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="medical_conditions">Medical Conditions or Injuries (Optional)</label>
                    <textarea id="medical_conditions" name="medical_conditions" rows="2" placeholder="Any injuries, medical conditions, or limitations we should know about..."></textarea>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" id="btn-back" class="btn btn-secondary" style="display: none;">Back</button>
                <button type="button" id="btn-next" class="btn btn-primary">Next</button>
                <button type="submit" id="btn-submit" class="btn btn-success" style="display: none;">Generate My Plan</button>
            </div>
        </form>
    </div>
</div>

<script>
let currentStep = 1;
const totalSteps = 3;

function updateStep(step) {
    document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.progress-step').forEach(el => el.classList.remove('active'));

    document.getElementById(`step-${step}`).classList.add('active');
    document.querySelectorAll('.progress-step').forEach((el, index) => {
        if (index < step) el.classList.add('active');
    });

    const titles = ['Personal Information', 'Fitness Profile', 'Goals & Schedule'];
    document.getElementById('step-title').textContent = titles[step - 1];
    document.getElementById('step-subtitle').textContent = `Step ${step} of ${totalSteps}`;

    document.getElementById('btn-back').style.display = step === 1 ? 'none' : 'inline-block';
    document.getElementById('btn-next').style.display = step === totalSteps ? 'none' : 'inline-block';
    document.getElementById('btn-submit').style.display = step === totalSteps ? 'inline-block' : 'none';
}

document.getElementById('btn-next').addEventListener('click', () => {
    if (currentStep < totalSteps) {
        currentStep++;
        updateStep(currentStep);
    }
});

document.getElementById('btn-back').addEventListener('click', () => {
    if (currentStep > 1) {
        currentStep--;
        updateStep(currentStep);
    }
});
</script>
{% endblock %}
